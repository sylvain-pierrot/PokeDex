{"ast":null,"code":"import axios from 'axios';\nimport localForage from \"localforage\";\nconst CACHE_PREFIX = \"pokeapi-js-wrapper-\";\nfunction loadResource(config, url) {\n  return new Promise((resolve, reject) => {\n    localForage.ready().then(() => {\n      localForage.getItem(`${CACHE_PREFIX}${url}`).then(value => {\n        if (value === null) {\n          loadUrl(config, url).then(res => {\n            resolve(res);\n          }).catch(err => {\n            reject(err);\n          });\n        } else {\n          resolve(addCacheMark(value));\n        }\n      }).catch(err => {\n        loadUrl(config, url).then(res => {\n          resolve(res);\n        }).catch(err => {\n          reject(err);\n        });\n      });\n    }).catch(err => {\n      loadUrl(config, url).then(res => {\n        resolve(res);\n      }).catch(err => {\n        reject(err);\n      });\n    });\n  });\n}\nfunction loadUrl(config, url) {\n  return new Promise((resolve, reject) => {\n    let options = {\n      baseURL: `${config.protocol}://${config.hostName}/`,\n      timeout: config.timeout\n    };\n    axios.get(url, options).then(response => {\n      // if there was an error\n      if (response.status >= 400) {\n        reject(response);\n      } else {\n        // if everything was good\n        // cache the object in browser memory\n        // only if cache is true\n        if (config.cache) {\n          localForage.setItem(`${CACHE_PREFIX}${url}`, response.data);\n        }\n        resolve(response.data);\n      }\n    }).catch(err => {\n      reject(err);\n    });\n  });\n}\nexport { loadResource };","map":{"version":3,"names":["axios","localForage","CACHE_PREFIX","loadResource","config","url","Promise","resolve","reject","ready","then","getItem","value","loadUrl","res","catch","err","addCacheMark","options","baseURL","protocol","hostName","timeout","get","response","status","cache","setItem","data"],"sources":["/home/pierrots/Polytech/WOA/js/lab4/pokedex/node_modules/pokeapi-js-wrapper/src/getter.js"],"sourcesContent":["import axios from 'axios'\nimport localForage from \"localforage\"\n\nconst CACHE_PREFIX = \"pokeapi-js-wrapper-\"\n\nfunction loadResource(config, url) {\n    return new Promise((resolve, reject) => {\n        localForage.ready()\n            .then(() => {\n                localForage.getItem(`${CACHE_PREFIX}${url}`)\n                    .then(value => {\n                        if (value === null) {\n                            loadUrl(config, url).then(res => {resolve(res)})\n                                .catch(err => {reject(err)})\n                        } else {\n                            resolve(addCacheMark(value))\n                        }\n                    })\n                    .catch(err => {\n                        loadUrl(config, url).then(res => {resolve(res)})\n                            .catch(err => {reject(err)})\n                    })\n            })\n            .catch(err => {\n                loadUrl(config, url).then(res => {resolve(res)})\n                    .catch(err => {reject(err)})\n            })\n    })\n}\n\nfunction loadUrl(config, url) {\n    return new Promise((resolve, reject) => {\n        let options = {\n            baseURL: `${config.protocol}://${config.hostName}/`,\n            timeout: config.timeout\n        }\n        axios.get(url, options)\n            .then(response => {\n                // if there was an error\n                if (response.status >= 400) {\n                    reject(response)\n                } else {\n                    // if everything was good\n                    // cache the object in browser memory\n                    // only if cache is true\n                    if (config.cache) {\n                        localForage.setItem(`${CACHE_PREFIX}${url}`, response.data)\n                    }\n                    resolve(response.data)\n                }  \n            })\n            .catch(err => { reject(err) }) \n    })\n}\n\nexport { loadResource }\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,WAAW,MAAM,aAAa;AAErC,MAAMC,YAAY,GAAG,qBAAqB;AAE1C,SAASC,YAAY,CAACC,MAAM,EAAEC,GAAG,EAAE;EAC/B,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACpCP,WAAW,CAACQ,KAAK,EAAE,CACdC,IAAI,CAAC,MAAM;MACRT,WAAW,CAACU,OAAO,CAAE,GAAET,YAAa,GAAEG,GAAI,EAAC,CAAC,CACvCK,IAAI,CAACE,KAAK,IAAI;QACX,IAAIA,KAAK,KAAK,IAAI,EAAE;UAChBC,OAAO,CAACT,MAAM,EAAEC,GAAG,CAAC,CAACK,IAAI,CAACI,GAAG,IAAI;YAACP,OAAO,CAACO,GAAG,CAAC;UAAA,CAAC,CAAC,CAC3CC,KAAK,CAACC,GAAG,IAAI;YAACR,MAAM,CAACQ,GAAG,CAAC;UAAA,CAAC,CAAC;QACpC,CAAC,MAAM;UACHT,OAAO,CAACU,YAAY,CAACL,KAAK,CAAC,CAAC;QAChC;MACJ,CAAC,CAAC,CACDG,KAAK,CAACC,GAAG,IAAI;QACVH,OAAO,CAACT,MAAM,EAAEC,GAAG,CAAC,CAACK,IAAI,CAACI,GAAG,IAAI;UAACP,OAAO,CAACO,GAAG,CAAC;QAAA,CAAC,CAAC,CAC3CC,KAAK,CAACC,GAAG,IAAI;UAACR,MAAM,CAACQ,GAAG,CAAC;QAAA,CAAC,CAAC;MACpC,CAAC,CAAC;IACV,CAAC,CAAC,CACDD,KAAK,CAACC,GAAG,IAAI;MACVH,OAAO,CAACT,MAAM,EAAEC,GAAG,CAAC,CAACK,IAAI,CAACI,GAAG,IAAI;QAACP,OAAO,CAACO,GAAG,CAAC;MAAA,CAAC,CAAC,CAC3CC,KAAK,CAACC,GAAG,IAAI;QAACR,MAAM,CAACQ,GAAG,CAAC;MAAA,CAAC,CAAC;IACpC,CAAC,CAAC;EACV,CAAC,CAAC;AACN;AAEA,SAASH,OAAO,CAACT,MAAM,EAAEC,GAAG,EAAE;EAC1B,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACpC,IAAIU,OAAO,GAAG;MACVC,OAAO,EAAG,GAAEf,MAAM,CAACgB,QAAS,MAAKhB,MAAM,CAACiB,QAAS,GAAE;MACnDC,OAAO,EAAElB,MAAM,CAACkB;IACpB,CAAC;IACDtB,KAAK,CAACuB,GAAG,CAAClB,GAAG,EAAEa,OAAO,CAAC,CAClBR,IAAI,CAACc,QAAQ,IAAI;MACd;MACA,IAAIA,QAAQ,CAACC,MAAM,IAAI,GAAG,EAAE;QACxBjB,MAAM,CAACgB,QAAQ,CAAC;MACpB,CAAC,MAAM;QACH;QACA;QACA;QACA,IAAIpB,MAAM,CAACsB,KAAK,EAAE;UACdzB,WAAW,CAAC0B,OAAO,CAAE,GAAEzB,YAAa,GAAEG,GAAI,EAAC,EAAEmB,QAAQ,CAACI,IAAI,CAAC;QAC/D;QACArB,OAAO,CAACiB,QAAQ,CAACI,IAAI,CAAC;MAC1B;IACJ,CAAC,CAAC,CACDb,KAAK,CAACC,GAAG,IAAI;MAAER,MAAM,CAACQ,GAAG,CAAC;IAAC,CAAC,CAAC;EACtC,CAAC,CAAC;AACN;AAEA,SAASb,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}